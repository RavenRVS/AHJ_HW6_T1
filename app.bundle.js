!function(){"use strict";class e{static createNewCardWidget(e){const t=document.querySelector(`.${e}`);document.querySelector(`.${e} footer`).style.display="none";const n=document.createElement("div");n.className="new-card-widget",t.append(n);const o=document.createElement("textarea");o.className="new-card-text",o.setAttribute("placeholder","Please describe the task..."),o.setAttribute("rows","3");const c=document.createElement("footer");c.className="new-card-widget-footer",n.append(o),n.append(c);const s=document.createElement("button");s.className="add-button",s.textContent="Add card",c.append(s);const a=document.createElement("div");a.classList="widget-footer-block",c.append(a);const r=document.createElement("p");r.classList="card-widget-close",r.textContent="✖";const l=document.createElement("p");l.classList="card-widget-context",l.textContent="⋯",a.append(r),a.append(l)}}class t{static createNewCard(e,t){const n=document.querySelector(`.${e}`),o=document.querySelector(`.${e} footer`),c=document.createElement("p");c.className="card-window moveable",n.append(c),c.textContent=t,c.style.position="relative";const s=document.createElement("div");s.className="card-close",s.textContent="✖",c.append(s),o.before(c),c.addEventListener("mouseenter",(()=>{c.querySelector(".card-close").style.display="block"})),c.addEventListener("mouseleave",(()=>{c.querySelector(".card-close").style.display="none"}))}}class n{static chargePopUp(e){const t=document.createElement("div");t.className="widget-hint";const n=document.createElement("p");n.className="widget-hint-content",n.textContent="Sorry! Not available now. Stay tune!",t.append(n),document.body.appendChild(t);const{top:o,left:c}=e.getBoundingClientRect();o<=t.clientHeight?t.style.top=`${window.scrollY+o+e.clientHeight}px`:t.style.top=window.scrollY+o-t.clientHeight+"px",t.style.left=window.scrollX+c-(t.clientWidth-e.clientWidth)/2+"px",setTimeout((()=>{t.remove()}),1500)}}class o{static setRotation(e,t,n){e.clientX-t.getBoundingClientRect().left>=t.getBoundingClientRect().right-e.clientX?n.classList.add("rotate-left"):n.classList.add("rotate-right")}}new class{constructor(){this.createContentBoard()}createContentBoard(){const e=document.querySelector("body"),t=document.createElement("div");t.className="content-board",e.append(t);const n=document.createElement("main");n.className="task-board",t.append(n)}},new class{constructor(){this.createTaskColumns()}createTaskColumns(){const e=document.querySelector(".task-board"),t=document.createElement("section");t.className="to-do column dropable",e.append(t);const n=document.createElement("section");n.className="in-progress column dropable",e.append(n);const o=document.createElement("section");o.className="done column dropable",e.append(o);const c=document.createElement("header");t.append(c);const s=document.createElement("header");n.append(s);const a=document.createElement("header");o.append(a);const r=document.createElement("footer");r.className="footer to-do",t.append(r);const l=document.createElement("p");l.className="add-card-button",r.append(l),l.textContent="+ Add another card";const d=document.createElement("footer");d.className="footer in-progess",n.append(d);const i=document.createElement("p");i.className="add-card-button",d.append(i),i.textContent="+ Add another card";const m=document.createElement("footer");m.className="footer done",o.append(m);const u=document.createElement("p");u.className="add-card-button",m.append(u),u.textContent="+ Add another card";const p=document.createElement("p"),g=document.createElement("div");g.classList="column-header-button",g.textContent="⋯",c.append(p),p.textContent="todo",c.append(g);const y=document.createElement("p"),E=document.createElement("div");E.classList="column-header-button",E.textContent="⋯",s.append(y),y.textContent="in progress",s.append(E);const v=document.createElement("p"),h=document.createElement("div");h.classList="column-header-button",h.textContent="⋯",a.append(v),v.textContent="done",a.append(h)}},new class{constructor(){this.reconstruction(),this.clickEvents(),this.dragEvents()}clickEvents(){document.querySelector(".task-board").addEventListener("click",(o=>{if(o.target.classList.contains("add-card-button")){document.querySelector(".new-card-widget")&&this.closeOldWidget();const t=o.target.closest(".column").className.split(" ");e.createNewCardWidget(t[0])}else if(o.target.classList.contains("card-widget-close"))this.closeOldWidget();else if(o.target.classList.contains("add-button")){const e=o.target.closest(".column").className.split(" "),n=document.querySelector(".new-card-text").value;t.createNewCard(e[0],n),this.closeOldWidget(),this.saveData()}else if(o.target.classList.contains("card-close")){o.target.closest(".card-window").remove(),this.saveData()}else(o.target.classList.contains("column-header-button")||o.target.classList.contains("card-widget-context"))&&n.chargePopUp(o.target)}))}dragEvents(){let e=null,t=null,n=null;const c=document.querySelector(".task-board");c.addEventListener("mousedown",(s=>{if(!s.target.classList.contains("card-window"))return;s.target.ondragstart=function(){return!1},this.removePointerEvents(),e=s.target,t=s.target.cloneNode(!0),n=s.target.cloneNode(!0),n.style.opacity="0";const a=s.clientX-e.getBoundingClientRect().left+c.getBoundingClientRect().left,r=s.clientY-e.getBoundingClientRect().top+c.getBoundingClientRect().top;t.classList.add("dragged"),t.style.pointerEvents="none",t.style.position="absolute",t.style.zIndex="9",t.style.cursor="grabbing",t.classList.add("size-fixed");const l=`${e.offsetHeight}px`,d=`${e.offsetWidth}px`;t.style.setProperty("--element-height",l),t.style.setProperty("--element-width",d),e.classList.add("invisible"),document.body.appendChild(t),t.style.left=s.pageX-a+"px",t.style.top=s.pageY-r+"px",o.setRotation(s,e,t),c.addEventListener("mousemove",(o=>{if(o.preventDefault(),!e)return;t.style.left=o.pageX-a+"px",t.style.top=o.pageY-r+"px";const c=document.elementFromPoint(o.clientX,o.clientY);c.classList.contains("moveable")?(c.closest(".column").insertBefore(n,c),n.addEventListener("mouseleave",(e=>{e.target.remove()}))):"HEADER"===c.tagName?(c.after(n),n.addEventListener("mouseleave",(e=>{e.target.remove()}))):"FOOTER"===c.tagName&&(c.closest(".column").insertBefore(n,c),n.addEventListener("mouseleave",(e=>{e.target.remove()})))})),c.addEventListener("mouseleave",(()=>{e&&(e.classList.remove("invisible"),document.body.removeChild(t),t=null,e=null)}))})),c.addEventListener("mouseup",(o=>{if(!e)return;const c=document.elementFromPoint(o.clientX,o.clientY);let s;const a=c.closest(".dropable");if(c.classList.contains("moveable")){c.getBoundingClientRect().top>=t.getBoundingClientRect().top?a.insertBefore(e,c):c.after(e),s=c.querySelector(".card-close"),s.style.display="none"}else{if(c.classList.contains("moveable"))return;"HEADER"===c.tagName?c.after(e):"FOOTER"===c.tagName?a.insertBefore(e,a.lastChild):"SECTION"===c.tagName&&c.firstChild.after(e)}n&&n.remove(),this.restorePointerEvents(),e.classList.remove("invisible"),document.body.removeChild(t),t=null,e=null,this.saveData()}))}saveData(){localStorage.removeItem("check-list data");const e=document.querySelector(".to-do"),t=document.querySelector(".in-progress"),n=document.querySelector(".done"),o=e.querySelectorAll(".card-window");let c=null;o&&(c=[...o]);const s=t.querySelectorAll(".card-window");let a=null;s&&(a=[...s]);const r=n.querySelectorAll(".card-window");let l=null;r&&(l=[...r]);const d={};c&&c.forEach(((e,t)=>{d[t]=e.innerText}));const i={};a&&a.forEach(((e,t)=>{i[t]=e.innerText}));const m={};l&&l.forEach(((e,t)=>{m[t]=e.innerText}));const u={"to-do":d,"in-progress":i,done:m};localStorage.setItem("check-list data",JSON.stringify(u))}reconstruction(){if(localStorage.getItem("check-list data")){const e=JSON.parse(localStorage.getItem("check-list data"));if(0!==Object.keys(e["to-do"]).length)for(const n in e["to-do"])t.createNewCard("to-do",e["to-do"][n]);if(0!==Object.keys(e["in-progress"]).length)for(const n in e["in-progress"])t.createNewCard("in-progress",e["in-progress"][n]);if(0!==Object.keys(e.done).length)for(const n in e.done)t.createNewCard("done",e.done[n])}}closeOldWidget(){const e=document.querySelector(".new-card-widget");e.closest(".column").querySelector("footer").style.display="block",e.remove()}removePointerEvents(){[...document.querySelectorAll(".column header p")].forEach((e=>{e.style.pointerEvents="none"}));[...document.querySelectorAll(".column header div")].forEach((e=>{e.style.pointerEvents="none"}));[...document.querySelectorAll(".column footer p")].forEach((e=>{e.style.pointerEvents="none"}));[...document.querySelectorAll(".card-close")].forEach((e=>{e.style.pointerEvents="none"}))}restorePointerEvents(){[...document.querySelectorAll(".column header p")].forEach((e=>{e.style.pointerEvents="auto"}));[...document.querySelectorAll(".column header div")].forEach((e=>{e.style.pointerEvents="auto"}));[...document.querySelectorAll(".column footer p")].forEach((e=>{e.style.pointerEvents="auto"}));[...document.querySelectorAll(".card-close")].forEach((e=>{e.style.pointerEvents="auto"}))}}}();